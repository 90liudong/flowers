<!DOCTYPE html>
<html>
<head>
	<title>123</title>
	<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="html2canvas.js"></script>
	<style type="text/css"></style>
	<style type="text/css">
		body,html{
			/*padding: 0;
			margin: 0;*/
		}
		.shu1{
			background-color: red;
			width: 100%;
			height: 200px;
			background:url("2153.jpg");
			background-size: 100% 100%;
			position: absolute;
			top: 0;
			left: 0;
			z-index: -1;
		}
	</style>
</head>
<body>
	<div class="shu2"></div>
	<div class="shu shu1">
		123456
	</div>
	<button>save</button>
	<script type="text/javascript">
		$("button").click(function(){
				$(".shu").html("hahaha")
				$(".shu").show();
			  var w = $(".shu").width();  
                var h = $(".shu").height();//要将 canvas 的宽高设置成容器宽高的 2 倍  
                // console.log(w,h)
       
                var str = $('.shu');
                var dom=$(".shu"); //你要转变的dom
                var w = dom.width();
                var h = dom.height();
                
                var canvas = document.createElement("canvas");
                canvas.width = w * 2;
                canvas.height = h * 2;
                var context = canvas.getContext("2d");
                //然后将画布缩放，将图像放大两倍画到画布上
                context.scale(2,2);

                html2canvas(document.querySelector(".shu"), {
                    canvas: canvas,
                    allowTaint:true,
                    taintTest: false,
                    onrendered: function (canvas) {
                        var image = canvas.toDataURL("image/png");
                        var pHtml = "<img src="+image+"  />";
                        $('.shu').html(pHtml);
                        console.log("图片打印啦！");
                        $(".shu").removeClass("shu1")
                    }
                });  
		})
	</script>
</body>
</html>